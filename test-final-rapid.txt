
> vite_react_shadcn_ts@0.0.0 test
> vitest run src/__tests__/unit/components/RapidCalculator.test.tsx --run


 RUN  v3.2.4 C:/Projects/azuria

node.exe : stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should render 
calculator fields
No linha:1 caractere:1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (stderr | src/__...lculator fields:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
Warning: React does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in 
the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent 
component, remove it from the DOM element.
    at div
    at div (C:\Projects\azuria\setupTests.ts:4:21)
    at div
    at div
    at ManualPriceToggle (C:\Projects\azuria\src\components\calculators\ManualPriceToggle.tsx:13:30)
    at div
    at CalculatorContent (C:\Projects\azuria\src\domains\calculator\components\CalculatorContent.tsx:15:37)
    at Suspense
    at div
    at C:\Projects\azuria\src\components\ui\card.tsx:47:71
    at div
    at C:\Projects\azuria\src\components\ui\card.tsx:7:64
    at div
    at div (C:\Projects\azuria\setupTests.ts:4:21)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)
Warning: React does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the 
DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent 
component, remove it from the DOM element.
    at div
    at div (C:\Projects\azuria\setupTests.ts:4:21)
    at div
    at div
    at ManualPriceToggle (C:\Projects\azuria\src\components\calculators\ManualPriceToggle.tsx:13:30)
    at div
    at CalculatorContent (C:\Projects\azuria\src\domains\calculator\components\CalculatorContent.tsx:15:37)
    at Suspense
    at div
    at C:\Projects\azuria\src\components\ui\card.tsx:47:71
    at div
    at C:\Projects\azuria\src\components\ui\card.tsx:7:64
    at div
    at div (C:\Projects\azuria\setupTests.ts:4:21)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)
Warning: validateDOMNesting(...): <div> cannot appear as a descendant of <p>.
    at div
    at Badge (C:\Projects\azuria\src\components\ui\badge.tsx:9:18)
    at p
    at C:\Projects\azuria\src\components\ui\card.tsx:37:75
    at div
    at div
    at div
    at C:\Projects\azuria\src\components\ui\card.tsx:17:70
    at div
    at C:\Projects\azuria\src\components\ui\card.tsx:7:64
    at C:\Projects\azuria\src\components\calculators\HistoryDisplayOptimized.tsx:274:77
    at Suspense
    at div
    at div (C:\Projects\azuria\setupTests.ts:4:21)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should render calculator fields
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Error in fetchSubscription: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:19:21
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Warning: An update to RapidCalculatorInner inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at 
https://reactjs.org/link/wrap-tests-with-act
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should render calculator fields
Error: Uncaught [TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function]
    at reportException (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22877:5)
    at captureCommitPhaseError (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27165:5) 
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:103:16
    at safelyCallDestroy (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27077:3)
    at flushPassiveEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27023:14)
    at commitRootImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:26974:5)
The above error occurred in the <RapidCalculatorInner> component:

    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call setCost when cost 
input changes
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Error in fetchSubscription: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:19:21
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Warning: An update to RapidCalculatorInner inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at 
https://reactjs.org/link/wrap-tests-with-act
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call setCost when cost 
input changes
Error: Uncaught [TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function]
    at reportException (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22877:5)
    at captureCommitPhaseError (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27165:5) 
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:103:16
    at safelyCallDestroy (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27077:3)
    at flushPassiveEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27023:14)
    at commitRootImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:26974:5)
The above error occurred in the <RapidCalculatorInner> component:

    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call calculatePrice when 
calculate button is clicked
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Error in fetchSubscription: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:19:21
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Warning: An update to RapidCalculatorInner inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at 
https://reactjs.org/link/wrap-tests-with-act
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call calculatePrice when 
calculate button is clicked
Error: Uncaught [TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function]
    at reportException (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22877:5)
    at captureCommitPhaseError (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27165:5) 
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:103:16
    at safelyCallDestroy (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27077:3)
    at flushPassiveEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27023:14)
    at commitRootImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:26974:5)
The above error occurred in the <RapidCalculatorInner> component:

    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should display result when 
calculation is complete
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Error in fetchSubscription: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:19:21
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Warning: An update to RapidCalculatorInner inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at 
https://reactjs.org/link/wrap-tests-with-act
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should display result when 
calculation is complete
Error: Uncaught [TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function]
    at reportException (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22877:5)
    at captureCommitPhaseError (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27165:5) 
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:103:16
    at safelyCallDestroy (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27077:3)
    at flushPassiveEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27023:14)
    at commitRootImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:26974:5)
The above error occurred in the <RapidCalculatorInner> component:

    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should show loading state when 
calculating
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Error in fetchSubscription: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:19:21
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Warning: An update to RapidCalculatorInner inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at 
https://reactjs.org/link/wrap-tests-with-act
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should show loading state when 
calculating
Error: Uncaught [TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function]
    at reportException (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22877:5)
    at captureCommitPhaseError (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27165:5) 
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:103:16
    at safelyCallDestroy (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27077:3)
    at flushPassiveEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27023:14)
    at commitRootImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:26974:5)
The above error occurred in the <RapidCalculatorInner> component:

    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call resetCalculator when 
clear button is clicked
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Error in fetchSubscription: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:19:21
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Warning: An update to RapidCalculatorInner inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at 
https://reactjs.org/link/wrap-tests-with-act
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call resetCalculator when 
clear button is clicked
Error: Uncaught [TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function]
    at reportException (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22877:5)
    at captureCommitPhaseError (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27165:5) 
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:103:16
    at safelyCallDestroy (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27077:3)
    at flushPassiveEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27023:14)
    at commitRootImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:26974:5)
The above error occurred in the <RapidCalculatorInner> component:

    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should render margin section
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Erro ao obter userId: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at getUserId (C:\Projects\azuria\src\hooks\useMaquininhaPresets.ts:34:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Error in fetchSubscription: TypeError: Cannot destructure property 'data' of '(intermediate value)' as it is undefined.
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:19:21
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
Warning: An update to RapidCalculatorInner inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at 
https://reactjs.org/link/wrap-tests-with-act
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

stderr | src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should render margin section
Error: Uncaught [TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function]
    at reportException (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent 
(C:\Projects\azuria\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22877:5)
    at captureCommitPhaseError (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27165:5) 
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at C:\Projects\azuria\src\hooks\useSubscription.tsx:103:16
    at safelyCallDestroy (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin 
(C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27077:3)
    at flushPassiveEffects (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:27023:14)
    at commitRootImpl (C:\Projects\azuria\node_modules\react-dom\cjs\react-dom.development.js:26974:5)
The above error occurred in the <RapidCalculatorInner> component:

    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:78:74
    at UnifiedErrorBoundary (C:\Projects\azuria\src\shared\components\ErrorBoundary\UnifiedErrorBoundary.tsx:467:9)
    at ComponentErrorBoundary
    at CalculatorProvider (C:\Projects\azuria\src\domains\calculator\context\CalculatorContext.tsx:116:31)
    at C:\Projects\azuria\src\domains\calculator\components\RapidCalculator.tsx:55:76
    at Router (C:\Projects\azuria\node_modules\react-router\dist\umd\react-router.development.js:1174:17)
    at BrowserRouter (C:\Projects\azuria\node_modules\react-router-dom\dist\umd\react-router-dom.development.js:694:7)
    at QueryClientProvider 
(file:///C:/Projects/azuria/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at TestProvider (C:\Projects\azuria\src\utils\testing\testUtils.tsx:27:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 ÔØ» src/__tests__/unit/components/RapidCalculator.test.tsx (7 tests | 7 failed) 930ms
   ├ù RapidCalculator > should render calculator fields 271ms
     ÔåÆ supabase.removeChannel is not a function
   ├ù RapidCalculator > should call setCost when cost input changes 59ms
     ÔåÆ supabase.removeChannel is not a function
   ├ù RapidCalculator > should call calculatePrice when calculate button is clicked 123ms
     ÔåÆ expected "spy" to be called at least once
     ÔåÆ supabase.removeChannel is not a function
   ├ù RapidCalculator > should display result when calculation is complete 211ms
     ÔåÆ supabase.removeChannel is not a function
   ├ù RapidCalculator > should show loading state when calculating 156ms
     ÔåÆ supabase.removeChannel is not a function
   ├ù RapidCalculator > should call resetCalculator when clear button is clicked 56ms
     ÔåÆ supabase.removeChannel is not a function
   ├ù RapidCalculator > should render margin section 52ms
     ÔåÆ supabase.removeChannel is not a function

ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ» Failed Tests 7 ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»

 FAIL  src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should render calculator fields
 FAIL  src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call setCost when cost input 
changes
 FAIL  src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call calculatePrice when 
calculate button is clicked
 FAIL  src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should display result when 
calculation is complete
 FAIL  src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should show loading state when 
calculating
 FAIL  src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call resetCalculator when 
clear button is clicked
 FAIL  src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should render margin section
TypeError: supabase.removeChannel is not a function
 ÔØ» src/hooks/useSubscription.tsx:103:16
    101| 
    102|     return () => {
    103|       supabase.removeChannel(channel);
       |                ^
    104|     };
    105|   }, [fetchSubscription]);
 ÔØ» safelyCallDestroy node_modules/react-dom/cjs/react-dom.development.js:22971:5
 ÔØ» commitHookEffectListUnmount node_modules/react-dom/cjs/react-dom.development.js:23139:11
 ÔØ» commitPassiveUnmountInsideDeletedTreeOnFiber node_modules/react-dom/cjs/react-dom.development.js:25140:11
 ÔØ» commitPassiveUnmountEffectsInsideOfDeletedTree_begin node_modules/react-dom/cjs/react-dom.development.js:25087:5
 ÔØ» commitPassiveUnmountEffects_begin node_modules/react-dom/cjs/react-dom.development.js:24995:11
 ÔØ» commitPassiveUnmountEffects node_modules/react-dom/cjs/react-dom.development.js:24980:3
 ÔØ» flushPassiveEffectsImpl node_modules/react-dom/cjs/react-dom.development.js:27077:3
 ÔØ» flushPassiveEffects node_modules/react-dom/cjs/react-dom.development.js:27023:14
 ÔØ» commitRootImpl node_modules/react-dom/cjs/react-dom.development.js:26974:5

ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[1/8]ÔÄ»

 FAIL  src/__tests__/unit/components/RapidCalculator.test.tsx > RapidCalculator > should call calculatePrice when 
calculate button is clicked
AssertionError: expected "spy" to be called at least once
 ÔØ» src/__tests__/unit/components/RapidCalculator.test.tsx:117:47
    115|     fireEvent.click(calculateButton)
    116| 
    117|     expect(mockCalculatorHook.calculatePrice).toHaveBeenCalled()
       |                                               ^
    118|   })
    119| 

ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[2/8]ÔÄ»


 Test Files  1 failed (1)
      Tests  7 failed (7)
   Start at  09:23:23
   Duration  6.00s (transform 661ms, setup 502ms, collect 2.76s, tests 930ms, environment 789ms, prepare 147ms)

